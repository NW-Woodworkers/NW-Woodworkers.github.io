<html lang="en">
<head>
    <title>Northwest Woodworkers Association Website - Gallery</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="lightgallery/css/lightgallery.css">

    <style>
        #gallery_list {
            margin: 15px;
            display: none;
        }
        #gallery_list ul {
            margin-top: 10px;
            list-style: none;
        }
        #lightgallery {
            margin: 15px;
            display: none;
        }
        .gallery_thumb {
            border: 1px solid #666666;
            margin: 2px;
            width: 180px;
            height: 180px;
        }
    </style>

    <script src="lightgallery/js/lightgallery.min.js"></script>
    <script src="lightgallery/js/lg-thumbnail.js"></script>
    <script src="lightgallery/js/lg-fullscreen.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
        function load_member_list() {
            console.log("Loading member list");

            $.getJSON("/galleries_list.json", function(data) {
                var container = $("#gallery_list p");
                container.empty();

                var user_list = document.createElement("ul");
                for (user of data.users) {
                    var name = document.createTextNode(user.name);

                    var list_link = document.createElement("a");
                    list_link.appendChild(name);
                    list_link.href = "/gallery.html#" + user.folder;

                    var list_item = document.createElement("li");
                    list_item.appendChild(list_link);
                    user_list.appendChild(list_item);
                }

                container.append(user_list);

                $("#lightgallery").hide();
                $("#gallery_list").show();
            });
        }

        function load_member_images(member_name) {
            console.log("Loading contents for user " + member_name);

            var url = "/galleries/" + member_name + "/images.json";
            $.getJSON(url, function(data) {
                var lightgallery = $("#lightgallery");
                lightgallery.empty()

                for (image of data.images) {
                    var img = document.createElement("img");
                    img.src = "galleries/" + member_name + "/thumbs/" + image.filename;
                    img.className = "gallery_thumb";

                    var link = document.createElement("a");
                    link.href = "galleries/" + member_name + "/images/" + image.filename;
                    link.className = "gallery_link";
                    link.appendChild(img);

                    lightgallery.append(link);
                }

                lightGallery(document.getElementById('lightgallery'), {
                    download: false,
                    thumbnail: true,
                });
                $("#gallery_list").hide();
                $("#lightgallery").show();
            });
        }

        function load_content() {
            var member_name = window.location.hash.substr(1);
            if (member_name === "") {
                load_member_list();
            } else {
                load_member_images(member_name);
            }
        }

        window.onhashchange = load_content;
        load_content();
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-87325481-1', 'auto');
      ga('send', 'pageview');
    </script>

</head>
<body>
<div id="central">
    <div id="header"></div>
    <ul id="navlist">
      <li><a id="n1" href="index.html">Home</a></li>
      <li><a id="n2" href="sponsors.html">Sponsors</a></li>
      <li><a id="n3" href="forum.html">Forum</a></li>
      <li><a id="n4" href="newsletters.html">Newsletter</a></li>
      <li><a id="n5" href="gallery.html">Gallery</a></li>
      <li><a id="n6" href="contact.html">Contact Us</a></li>
      <li><a id="n7" href="links.html">Links</a></li>
    </ul>

    <div id="content">
        <h1><div align="center">Northwest Woodworkers Association Gallery</div></h1>

        <div id="gallery_list">
            <h2>Member Galleries</h2>
            <p></p>
        </div>

        <div id="lightgallery"></div>

        <p> <font size="-1">Copyright &copy; 2009-2016 Northwest Woodworkers Association </font></p>
        <div id="footer"></div>
    </div>
    <div id="imagepreloader"><img src="images/buttonover.gif" alt="mouseover" /></div>
</div>
</body>
</html>

